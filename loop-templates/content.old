<?php
/**
 * Post rendering content according to caller of get_template_part.
 *
 * @package understrap
 */

if ( ! defined( 'ABSPATH' ) ) {
	exit; // Exit if accessed directly.
}
?>

<?php 
if ( get_post_type( get_the_ID() ) == 'post' ) :
	$category = get_the_category();
	$first_category = $category[0]; 
endif; 
?>

<div class="col-lg-4 col-md-6 grid-item  grid-item-article">

	<article class="homepage-post-item homepage-post-item-<?php echo $news_item_count; ?> homepage-<?php if ( get_post_type( get_the_ID() ) == 'events' ) : echo 'events'; else: echo $first_category->slug; endif; ?>">

		<div class="meta">

			<?php 
			if ( get_post_type( get_the_ID() ) == 'post' ) :
				echo sprintf( '<a href="%s">%s</a>', get_category_link( $first_category ), $first_category->name );
			elseif ( get_post_type( get_the_ID() ) == 'events' ) : ?>
				<a href="/events/"><?php _e( 'Events', 'menziestheme'); ?></a>
			<?php elseif ( get_post_type( get_the_ID() ) == 'page' ) : ?>
				<a href="/helping-you/"><?php _e( 'Pages', 'menziestheme'); ?></a>
			<?php endif;
			?>

			<div class="post-date">
				<?php 
				if ( get_post_type( get_the_ID() ) == 'events' ) :
					the_field('date_of_event');
				else:
					// the_time('d/m/Y');
				endif;
				?>
			</div>

		</div>

		<header>

		  	<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

		</header>

		<?php the_excerpt( '' ); ?>

		<footer>

			<a href="<?php the_permalink(); ?>" class="link" title="<?php the_title(); ?>">read more</a>
			<?php
			// echo sprintf( '<a href="%s" class="link">%s %s</a>', get_category_link( $first_category ), 'More ', $first_category->name );
			?>	

		</footer>

	</article>

</div>

<?php $news_item_count++; ?>
