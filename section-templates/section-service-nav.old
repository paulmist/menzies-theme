<?php 
// Section template for service list (navigation)

$container = get_theme_mod( 'understrap_container_type' );
?>

<?php if( have_rows('service_links', 'option') ): ?>

	<?php $service_parent_count = 1; ?>

	<ul class="<?php the_sub_field('text'); ?>-top-menu row load" aria-labelledby="menu-item-dropdown-<?php echo $nav_parent_count; ?>" role="menu">

		<li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-0" class="menu-item menu-item-0 nav-item col-md-3 col-6 mega-panel-top-level">

			<div class="services-nav-all-link">

				<a title="All Menzies Services" href="/services/" class="">All Menzies Services</a>

			</div>

		</li>

		<?php while( have_rows('service_links', 'option') ) : the_row(); ?>

			<li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-<?php echo $service_parent_count; ?>" class="menu-item menu-item-<?php echo $service_parent_count; ?> nav-item col-md-3 col-6 mega-panel-top-level">

				<a title="<?php the_sub_field('parent_item_title'); ?>" href="<?php the_sub_field('parent_item_link'); ?>" class=""><?php the_sub_field('parent_item_title'); ?></a>

				<?php if( have_rows('child_items', 'option') ): ?>

					<?php $service_child_count = 1; ?>

					<ul class="sub-menu">

						<?php while( have_rows('child_items', 'option') ) : the_row(); ?>

							<li itemscope="itemscope" itemtype="https://www.schema.org/SiteNavigationElement" id="menu-item-<?php echo $service_parent_count . '-' . $service_child_count; ?>" class="menu-item menu-item-<?php echo $service_parent_count . '-' . $service_child_count; ?> nav-item service-child-item">
								<a title="<?php the_sub_field('title'); ?>" href="<?php the_sub_field('link'); ?>" class=""><span class="list-triangle"></span>  <?php the_sub_field('title'); ?></a>

							</li>

							<?php $service_child_count++; ?>

						<?php endwhile; ?>

					</ul>

				<?php endif; ?>

			</li>

			<?php $service_parent_count++; ?>

		<?php endwhile; ?>

	</ul>

<?php endif; ?>